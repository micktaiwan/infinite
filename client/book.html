<template name="book">
  <ul id="vmenu">
    <li>
      <button class="js-add-layer"><i class="fas fa-plus"></i></button>
    </li>
    {{#each layers}}
    <li>
      <button class="{{active index}} js-focus-layer">{{add index 1}}</button>
    </li>
    {{/each}}
    <li class="menu-item {{menuOpen 'brushes'}}" data-menu="brushes">
      <i class="fas fa-brush button" title="Brushes"></i>
      <span class="active-indicator">{{activeBrushLabel}}</span>
      <ul class="submenu">
        <li class="js-brush-1 {{activeBrushClass 'lines' 2}}"><i class="fas fa-paint-brush"></i> Brush 2</li>
        <li class="js-brush-2 {{activeBrushClass 'lines' 3}}"><i class="fas fa-paint-brush"></i> Brush 3</li>
        <li class="js-brush-3 {{activeBrushClass 'lines' 15}}"><i class="fas fa-paint-brush"></i> Brush 15</li>
        <li class="js-brush-4 {{activeBrushClass 'lines' 100}}"><i class="fas fa-paint-brush"></i> Brush 100</li>
        <li class="sep"></li>
        <li class="js-ballpoint-1 {{activeBrushClass 'paper' 1}}"><i class="fas fa-pen"></i> Ball Point 1</li>
        <li class="js-ballpoint-2 {{activeBrushClass 'paper' 3}}"><i class="fas fa-pen"></i> Ball Point 3</li>
        <li class="js-ballpoint-3 {{activeBrushClass 'paper' 10}}"><i class="fas fa-pen"></i> Ball Point 10</li>
        <li class="sep"></li>
        <li class="js-shaky-1 {{activeBrushClass 'shaky' 3}}"><i class="fas fa-pen"></i> Shaky 3</li>
        <li class="js-shaky-2 {{activeBrushClass 'shaky' 10}}"><i class="fas fa-pen"></i> Shaky 10</li>
      </ul>
    </li>
    <li class="menu-item {{menuOpen 'sensitivity'}}" data-menu="sensitivity">
      <i class="fas fa-hammer button" title="Sensitivity"></i>
      <span class="active-indicator">{{activeSensitivityLabel}}</span>
      <ul class="submenu">
        <li class="js-sensitivity-0 {{activeSensitivityClass 0}}"><i class="fas fa-hammer"></i> Sensitivity 0</li>
        <li class="js-sensitivity-1 {{activeSensitivityClass 0.15}}"><i class="fas fa-hammer"></i> Sensitivity 1</li>
        <li class="js-sensitivity-2 {{activeSensitivityClass 0.3}}"><i class="fas fa-hammer"></i> Sensitivity 2</li>
      </ul>
    </li>
  </ul>

  <ul id="hmenu">
    <li class="menu-item {{menuOpen 'layers'}}" data-menu="layers">
      Layers
      <ul class="submenu">
        <li class="js-toggle-layer">Toggle layer <span>Shift+T</span></li>
        <li class="js-remove-layer">Remove last layer</li>
      </ul>
    </li>
    <li class="menu-item {{menuOpen 'help'}}" data-menu="help">
      Help
      <ul class="submenu highlight">
        <li>This menu is not actionable, just some reminders</li>
        <li class="spacer"></li>
        <li>Undo <span>Ctrl-Z</span></li>
        <li>Zoom <span>A</span></li>
        <li>Pan <span>Z</span></li>
        <li>Reset zoom and pan <span>&</span></li>
        <li>Eraser <span>E</span></li>
        <li>Line <span>D</span></li>
        <li>Rectangle <span>R</span></li>
        <li>Selection <span>S</span></li>
        <li class="spacer"></li>
        <li>
          To share a book, just send its address (url) to someone<br />
          He will have to signup and will have indefinite access to the book
        </li>
      </ul>
    </li>
    {{#unless currentUser}}
    <li class="error">You must be logged to save this book</li>
    {{/unless}}
    <li style="float:right; margin-right:150px">Pressure: {{pressure}}</li>
    <li style="float:right; margin-right:20px">Draw: {{drawTime}}ms</li>
    <li style="float:right; margin-right:20px">Drawn: {{drawnCount}}/{{objectCount}}</li>
    <li style="float:right; margin-right:20px" class="js-toggle-culling">Culling: {{#if cullingEnabled}}ON{{else}}OFF{{/if}}</li>
    <li style="float:right; margin-right:20px">Zoom: {{zoom}}</li>
  </ul>

  <div id="layers"></div>
  {{#unless Template.subscriptionsReady}} {{> loading}} {{/unless}}
</template>
